import{r as J,J as le,j as N,B as ue}from"./index-C_g83nc7.js";import{c as fe,b as he}from"./index.esm-BXeXpCuG.js";import{T as pe}from"./ToolImageInput-CFNY9OjJ.js";import{T as de}from"./ToolTextResult-h-NChVzd.js";import{T as ge}from"./ToolContent-CPG3NUPt.js";import{S as ve}from"./SelectWithDesc-FrpNoHFy.js";import{C as me}from"./CheckboxWithDesc-wy5nrFmd.js";import{c as we}from"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./BaseFileInput-c8nMlesD.js";import"./ContentPaste-CjGTXkhv.js";import"./InputFooter-BEiN93nS.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-Ccv-xqw_.js";import"./ResultFooter-BsMB-Y2y.js";import"./TextField-BB1W8KIt.js";import"./FormControlLabel-BYSc6Di4.js";import"./Checkbox-eIAKSjSC.js";import"./SwitchBase-BBer0tk-.js";var ye={exports:{}};(function(o){var i=function(s){var f=Object.prototype,p=f.hasOwnProperty,O=Object.defineProperty||function(t,e,r){t[e]=r.value},d,v=typeof Symbol=="function"?Symbol:{},L=v.iterator||"@@iterator",I=v.asyncIterator||"@@asyncIterator",S=v.toStringTag||"@@toStringTag";function g(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{g({},"")}catch{g=function(e,r,a){return e[r]=a}}function w(t,e,r,a){var n=e&&e.prototype instanceof W?e:W,u=Object.create(n.prototype),m=new z(a||[]);return O(u,"_invoke",{value:K(t,r,m)}),u}s.wrap=w;function $(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(a){return{type:"throw",arg:a}}}var G="suspendedStart",V="suspendedYield",Y="executing",k="completed",h={};function W(){}function j(){}function P(){}var F={};g(F,L,function(){return this});var B=Object.getPrototypeOf,A=B&&B(B(c([])));A&&A!==f&&p.call(A,L)&&(F=A);var C=P.prototype=W.prototype=Object.create(F);j.prototype=P,O(C,"constructor",{value:P,configurable:!0}),O(P,"constructor",{value:j,configurable:!0}),j.displayName=g(P,S,"GeneratorFunction");function M(t){["next","throw","return"].forEach(function(e){g(t,e,function(r){return this._invoke(e,r)})})}s.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===j||(e.displayName||e.name)==="GeneratorFunction":!1},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,g(t,S,"GeneratorFunction")),t.prototype=Object.create(C),t},s.awrap=function(t){return{__await:t}};function x(t,e){function r(u,m,y,E){var b=$(t[u],t,m);if(b.type==="throw")E(b.arg);else{var Q=b.arg,D=Q.value;return D&&typeof D=="object"&&p.call(D,"__await")?e.resolve(D.__await).then(function(R){r("next",R,y,E)},function(R){r("throw",R,y,E)}):e.resolve(D).then(function(R){Q.value=R,y(Q)},function(R){return r("throw",R,y,E)})}}var a;function n(u,m){function y(){return new e(function(E,b){r(u,m,E,b)})}return a=a?a.then(y,y):y()}O(this,"_invoke",{value:n})}M(x.prototype),g(x.prototype,I,function(){return this}),s.AsyncIterator=x,s.async=function(t,e,r,a,n){n===void 0&&(n=Promise);var u=new x(w(t,e,r,a),n);return s.isGeneratorFunction(e)?u:u.next().then(function(m){return m.done?m.value:u.next()})};function K(t,e,r){var a=G;return function(u,m){if(a===Y)throw new Error("Generator is already running");if(a===k){if(u==="throw")throw m;return l()}for(r.method=u,r.arg=m;;){var y=r.delegate;if(y){var E=q(y,r);if(E){if(E===h)continue;return E}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(a===G)throw a=k,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);a=Y;var b=$(t,e,r);if(b.type==="normal"){if(a=r.done?k:V,b.arg===h)continue;return{value:b.arg,done:r.done}}else b.type==="throw"&&(a=k,r.method="throw",r.arg=b.arg)}}}function q(t,e){var r=e.method,a=t.iterator[r];if(a===d)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=d,q(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var n=$(a,t.iterator,e.arg);if(n.type==="throw")return e.method="throw",e.arg=n.arg,e.delegate=null,h;var u=n.arg;if(!u)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h;if(u.done)e[t.resultName]=u.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=d);else return u;return e.delegate=null,h}M(C),g(C,S,"Generator"),g(C,L,function(){return this}),g(C,"toString",function(){return"[object Generator]"});function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function U(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}s.keys=function(t){var e=Object(t),r=[];for(var a in e)r.push(a);return r.reverse(),function n(){for(;r.length;){var u=r.pop();if(u in e)return n.value=u,n.done=!1,n}return n.done=!0,n}};function c(t){if(t){var e=t[L];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(p.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=d,n.done=!0,n};return a.next=a}}return{next:l}}s.values=c;function l(){return{value:d,done:!0}}return z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(U),!t)for(var e in this)e.charAt(0)==="t"&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(E,b){return u.type="throw",u.arg=t,e.next=E,b&&(e.method="next",e.arg=d),!!b}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],u=n.completion;if(n.tryLoc==="root")return r("end");if(n.tryLoc<=this.prev){var m=p.call(n,"catchLoc"),y=p.call(n,"finallyLoc");if(m&&y){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(m){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else if(y){if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&p.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&(t==="break"||t==="continue")&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var u=n?n.completion:{};return u.type=t,u.arg=e,n?(this.method="next",this.next=n.finallyLoc,h):this.complete(u)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),U(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if(a.type==="throw"){var n=a.arg;U(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:c(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=d),h}},s}(o.exports);try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}})(ye);var ie=(o,i)=>`${o}-${i}-${Math.random().toString(16).slice(3,8)}`;const be=ie;let re=0;var Le=({id:o,action:i,payload:s={}})=>{let f=o;return typeof f>"u"&&(f=be("Job",re),re+=1),{id:f,action:i,payload:s}},H={};let te=!1;H.logging=te;H.setLogging=o=>{te=o};H.log=(...o)=>te?console.log.apply(void 0,o):null;var Se=o=>{const i={};return typeof WorkerGlobalScope<"u"?i.type="webworker":typeof document=="object"?i.type="browser":typeof process=="object"&&typeof we=="function"&&(i.type="node"),typeof o>"u"?i:i[o]};const ke=Se("type")==="browser",Ee=ke?o=>new URL(o,window.location.href).href:o=>o;var Oe=o=>{const i={...o};return["corePath","workerPath","langPath"].forEach(s=>{o[s]&&(i[s]=Ee(i[s]))}),i},Te={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Pe="6.0.1",Ce={version:Pe};var $e={workerBlobURL:!0,logger:()=>{}};const Re=Ce.version,_e=$e;var Ie={..._e,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Re}/dist/worker.min.js`},je=({workerPath:o,workerBlobURL:i})=>{let s;if(Blob&&URL&&i){const f=new Blob([`importScripts("${o}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(f))}else s=new Worker(o);return s},Ae=o=>{o.terminate()},Me=(o,i)=>{o.onmessage=({data:s})=>{i(s)}},xe=async(o,i)=>{o.postMessage(i)};const X=o=>new Promise((i,s)=>{const f=new FileReader;f.onload=()=>{i(f.result)},f.onerror=({target:{error:{code:p}}})=>{s(Error(`File could not be read! Code=${p}`))},f.readAsArrayBuffer(o)}),ee=async o=>{let i=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?i=atob(o.split(",")[1]).split("").map(s=>s.charCodeAt(0)):i=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(i=await ee(o.src)),o.tagName==="VIDEO"&&(i=await ee(o.poster)),o.tagName==="CANVAS"&&await new Promise(s=>{o.toBlob(async f=>{i=await X(f),s()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const s=await o.convertToBlob();i=await X(s)}else(o instanceof File||o instanceof Blob)&&(i=await X(o));return new Uint8Array(i)};var Ne=ee;const Ge=Ie,We=je,Fe=Ae,Be=Me,Ue=xe,ze=Ne;var De={defaultOptions:Ge,spawnWorker:We,terminateWorker:Fe,onMessage:Be,send:Ue,loadImage:ze};const Ye=Oe,T=Le,{log:oe}=H,qe=ie,_=Te,{defaultOptions:Je,spawnWorker:He,terminateWorker:Ve,onMessage:Ke,loadImage:ne,send:Ze}=De;let ae=0;var se=async(o="eng",i=_.LSTM_ONLY,s={},f={})=>{const p=qe("Worker",ae),{logger:O,errorHandler:d,...v}=Ye({...Je,...s}),L={},I=typeof o=="string"?o.split("+"):o;let S=i,g=f;const w=[_.DEFAULT,_.LSTM_ONLY].includes(i)&&!v.legacyCore;let $,G;const V=new Promise((c,l)=>{G=c,$=l}),Y=c=>{$(c.message)};let k=He(v);k.onerror=Y,ae+=1;const h=({id:c,action:l,payload:t})=>new Promise((e,r)=>{oe(`[${p}]: Start ${c}, action=${l}`);const a=`${l}-${c}`;L[a]={resolve:e,reject:r},Ze(k,{workerId:p,jobId:c,action:l,payload:t})}),W=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),j=c=>h(T({id:c,action:"load",payload:{options:{lstmOnly:w,corePath:v.corePath,logging:v.logging}}})),P=(c,l,t)=>h(T({id:t,action:"FS",payload:{method:"writeFile",args:[c,l]}})),F=(c,l)=>h(T({id:l,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),B=(c,l)=>h(T({id:l,action:"FS",payload:{method:"unlink",args:[c]}})),A=(c,l,t)=>h(T({id:t,action:"FS",payload:{method:c,args:l}})),C=(c,l)=>h(T({id:l,action:"loadLanguage",payload:{langs:c,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[_.DEFAULT,_.LSTM_ONLY].includes(S)&&!v.legacyLang}}})),M=(c,l,t,e)=>h(T({id:e,action:"initialize",payload:{langs:c,oem:l,config:t}})),x=(c="eng",l,t,e)=>{if(w&&[_.TESSERACT_ONLY,_.TESSERACT_LSTM_COMBINED].includes(l))throw Error("Legacy model requested but code missing.");const r=l||S;S=r;const a=t||g;g=a;const u=(typeof c=="string"?c.split("+"):c).filter(m=>!I.includes(m));return I.push(...u),u.length>0?C(u,e).then(()=>M(c,r,a,e)):M(c,r,a,e)},K=(c={},l)=>h(T({id:l,action:"setParameters",payload:{params:c}})),q=async(c,l={},t={text:!0},e)=>h(T({id:e,action:"recognize",payload:{image:await ne(c),options:l,output:t}})),Z=async(c,l)=>{if(w)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return h(T({id:l,action:"detect",payload:{image:await ne(c)}}))},U=async()=>(k!==null&&(Ve(k),k=null),Promise.resolve());Ke(k,({workerId:c,jobId:l,status:t,action:e,data:r})=>{const a=`${e}-${l}`;if(t==="resolve")oe(`[${c}]: Complete ${l}`),L[a].resolve({jobId:l,data:r}),delete L[a];else if(t==="reject")if(L[a].reject(r),delete L[a],e==="load"&&$(r),d)d(r);else throw Error(r);else t==="progress"&&O({...r,userJobId:l})});const z={id:p,worker:k,load:W,writeText:P,readText:F,removeFile:B,FS:A,reinitialize:x,setParameters:K,recognize:q,detect:Z,terminate:U};return j().then(()=>C(o)).then(()=>M(o,i,f)).then(()=>G(z)).catch(()=>{}),V};const ce=se,Qe=async(o,i,s)=>{const f=await ce(i,1,s);return f.recognize(o).finally(async()=>{await f.terminate()})},Xe=async(o,i)=>{const s=await ce("osd",0,i);return s.detect(o).finally(async()=>{await s.terminate()})};var et={recognize:Qe,detect:Xe};const tt=se,rt=et;var ot={createWorker:tt,...rt};const nt=async(o,i)=>{try{const{language:s,detectParagraphs:f}=i,p=await ot.createWorker(s),O=URL.createObjectURL(o),{data:d}=await p.recognize(O);return URL.revokeObjectURL(O),await p.terminate(),d.text}catch(s){throw console.error("Error extracting text from image:",s),new Error("Failed to extract text from image. Please try again with a clearer image.")}},at=()=>[{value:"eng",label:"English"},{value:"fra",label:"French"},{value:"deu",label:"German"},{value:"spa",label:"Spanish"},{value:"ita",label:"Italian"},{value:"por",label:"Portuguese"},{value:"rus",label:"Russian"},{value:"jpn",label:"Japanese"},{value:"chi_sim",label:"Chinese (Simplified)"},{value:"chi_tra",label:"Chinese (Traditional)"},{value:"kor",label:"Korean"},{value:"ara",label:"Arabic"}],it={language:"eng",detectParagraphs:!0},st=fe({language:he().required("Language is required")});function Tt({title:o}){const[i,s]=J.useState(null),[f,p]=J.useState(""),[O,d]=J.useState(!1),{showSnackBar:v}=J.useContext(le),L=async(S,g)=>{if(g){d(!0);try{const w=await nt(g,S);p(w)}catch(w){v(w.message||"An error occurred while processing the image","error"),p("")}finally{d(!1)}}},I=({values:S,updateField:g})=>[{title:"OCR Options",component:N.jsxs(ue,{children:[N.jsx(ve,{selected:S.language,onChange:w=>g("language",w),description:"Select the primary language in the image for better accuracy",options:at()}),N.jsx(me,{checked:S.detectParagraphs,onChange:w=>g("detectParagraphs",w),description:"Attempt to preserve paragraph structure in the extracted text",title:"Detect Paragraphs"})]})}];return N.jsx(ge,{title:o,initialValues:it,getGroups:I,compute:L,input:i,validationSchema:st,inputComponent:N.jsx(pe,{value:i,onChange:s,accept:["image/jpeg","image/png"],title:"Input Image"}),resultComponent:N.jsx(de,{title:"Extracted Text",value:f,loading:O}),toolInfo:{title:"Image to Text (OCR)",description:"This tool extracts text from images using Optical Character Recognition (OCR). Upload an image containing text, select the primary language, and get the extracted text. For best results, use clear images with good contrast."}})}export{Tt as default};
