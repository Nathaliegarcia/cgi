import{r as u,j as a,B as p}from"./index-C_g83nc7.js";import{c as w,d as y}from"./index.esm-BXeXpCuG.js";import{S as d}from"./SimpleRadio-kuqVngOy.js";import{S as R}from"./SelectWithDesc-FrpNoHFy.js";import{T as C}from"./TextFieldWithDesc-PPwE1_13.js";import{T as j}from"./ToolContent-CPG3NUPt.js";import{T as I}from"./ToolImageInput-CFNY9OjJ.js";import{T as S}from"./ToolFileResult-UmzxLoM8.js";import{F as T,f as v}from"./index-on_GoYzL.js";import"./Radio-UAGSoQ3a.js";import"./SwitchBase-BBer0tk-.js";import"./TextField-BB1W8KIt.js";import"./BaseFileInput-c8nMlesD.js";import"./ContentPaste-CjGTXkhv.js";import"./InputFooter-BEiN93nS.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-Ccv-xqw_.js";import"./ResultFooter-BsMB-Y2y.js";const M=async(e,n)=>{const{rotateAngle:l,rotateMethod:g}=n;if(e.type==="image/svg+xml")try{const t=await e.text(),s=new DOMParser().parseFromString(t,"image/svg+xml"),o=s.documentElement;let r=o.getAttribute("transform")||"";const i=parseInt(l);if(i!==0){const c=o.getBBox(),f=c.x+c.width/2,b=c.y+c.height/2;r+=` rotate(${i} ${f} ${b})`}o.setAttribute("transform",r.trim());const h=new XMLSerializer().serializeToString(s),x=new Blob([h],{type:"image/svg+xml"});return new File([x],e.name,{type:"image/svg+xml"})}catch(t){return console.error("Error processing SVG:",t),null}try{const t=new T;await t.load(),await t.writeFile("input",await v(e));const m=`rotate=${l}*PI/180`;await t.exec(["-i","input","-vf",m,"output."+e.name.split(".").pop()]);const s=await t.readFile("output."+e.name.split(".").pop());return new File([s],e.name,{type:e.type})}catch(t){return console.error("Error processing image:",t),null}},A={rotateAngle:"90",rotateMethod:"Preset"},P=w({rotateAngle:y().when("rotateMethod",{is:"degrees",then:e=>e.min(-360,"Rotate angle must be at least -360").max(360,"Rotate angle must be at most 360").required("Rotate angle is required")})});function Q({title:e}){const[n,l]=u.useState(null),[g,t]=u.useState(null),m=async(o,r)=>{r&&t(await M(r,o))},s=({values:o,updateField:r})=>[{title:"Rotate Method",component:a.jsxs(p,{children:[a.jsx(d,{onClick:()=>r("rotateMethod","Preset"),checked:o.rotateMethod==="Preset",description:"Rotate by a specific angle in degrees.",title:"Preset angle"}),a.jsx(d,{onClick:()=>r("rotateMethod","Custom"),checked:o.rotateMethod==="Custom",description:"Rotate by a custom angle in degrees.",title:"Custom angle"})]})},...o.rotateMethod==="Preset"?[{title:"Preset angle",component:a.jsx(p,{children:a.jsx(R,{selected:o.rotateAngle,onChange:i=>r("rotateAngle",i),description:"Rotate by a specific angle in degrees.",options:[{label:"90 degrees",value:"90"},{label:"180 degrees",value:"180"},{label:"270 degrees",value:"270"}]})})}]:[{title:"Custom angle",component:a.jsx(p,{children:a.jsx(C,{value:o.rotateAngle,onOwnChange:i=>r("rotateAngle",i),description:"Rotate by a custom angle in degrees(from -360 to 360).",inputProps:{type:"number",min:-360,max:360}})})}]];return a.jsx(j,{title:e,initialValues:A,getGroups:s,compute:m,input:n,validationSchema:P,inputComponent:a.jsx(I,{value:n,onChange:l,title:"Input Image",accept:["image/*"]}),resultComponent:a.jsx(S,{value:g,title:"Rotated Image",extension:(n==null?void 0:n.name.split(".").pop())||"png"}),toolInfo:{title:"Rotate Image",description:"This tool allows you to rotate images by a specific angle in any degrees."}})}export{Q as default};
