import{a as v,r as $,j as A}from"./index-C_g83nc7.js";import{T as U}from"./ToolContent-CPG3NUPt.js";import{T as X}from"./ToolTextInput-CF8OsBTK.js";import{T as Y}from"./ToolTextResult-h-NChVzd.js";import{i as L,g as G,a as Z,v as F,X as k}from"./fxp-CqQGn1qw.js";import"./TextField-BB1W8KIt.js";import"./ContentPaste-CjGTXkhv.js";import"./InputFooter-BEiN93nS.js";import"./ResultFooter-BsMB-Y2y.js";const W={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(s,t){return t},attributeValueProcessor:function(s,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(s,t,e){return s},captureMetaData:!1},q=function(s){return Object.assign({},W,s)};let I;typeof Symbol!="function"?I="@@xmlMetadata":I=Symbol("XML Node Metadata");class T{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t,e){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),e!==void 0&&(this.child[this.child.length-1][I]={startIndex:e})}static getMetaDataSymbol(){return I}}class K{constructor(t){this.suppressValidationErr=!t}readDocType(t,e){const i={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,a=!1,r=!1,f="";for(;e<t.length;e++)if(t[e]==="<"&&!r){if(a&&m(t,"!ENTITY",e)){e+=7;let o,l;[o,l,e]=this.readEntityExp(t,e+1,this.suppressValidationErr),l.indexOf("&")===-1&&(i[o]={regx:RegExp(`&${o};`,"g"),val:l})}else if(a&&m(t,"!ELEMENT",e)){e+=8;const{index:o}=this.readElementExp(t,e+1);e=o}else if(a&&m(t,"!ATTLIST",e))e+=8;else if(a&&m(t,"!NOTATION",e)){e+=9;const{index:o}=this.readNotationExp(t,e+1,this.suppressValidationErr);e=o}else if(m(t,"!--",e))r=!0;else throw new Error("Invalid DOCTYPE");n++,f=""}else if(t[e]===">"){if(r?t[e-1]==="-"&&t[e-2]==="-"&&(r=!1,n--):n--,n===0)break}else t[e]==="["?a=!0:f+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:e}}readEntityExp(t,e){e=c(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)i+=t[e],e++;if(x(i),e=c(t,e),!this.suppressValidationErr){if(t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported")}let n="";return[e,n]=this.readIdentifierVal(t,e,"entity"),e--,[i,n,e]}readNotationExp(t,e){e=c(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;!this.suppressValidationErr&&x(i),e=c(t,e);const n=t.substring(e,e+6).toUpperCase();if(!this.suppressValidationErr&&n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);e+=n.length,e=c(t,e);let a=null,r=null;if(n==="PUBLIC")[e,a]=this.readIdentifierVal(t,e,"publicIdentifier"),e=c(t,e),(t[e]==='"'||t[e]==="'")&&([e,r]=this.readIdentifierVal(t,e,"systemIdentifier"));else if(n==="SYSTEM"&&([e,r]=this.readIdentifierVal(t,e,"systemIdentifier"),!this.suppressValidationErr&&!r))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:i,publicIdentifier:a,systemIdentifier:r,index:--e}}readIdentifierVal(t,e,i){let n="";const a=t[e];if(a!=='"'&&a!=="'")throw new Error(`Expected quoted string, found "${a}"`);for(e++;e<t.length&&t[e]!==a;)n+=t[e],e++;if(t[e]!==a)throw new Error(`Unterminated ${i} value`);return e++,[e,n]}readElementExp(t,e){e=c(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;if(!this.suppressValidationErr&&!L(i))throw new Error(`Invalid element name: "${i}"`);e=c(t,e);let n="";if(t[e]==="E"&&m(t,"MPTY",e))e+=4;else if(t[e]==="A"&&m(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)n+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:i,contentModel:n.trim(),index:e}}readAttlistExp(t,e){e=c(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;x(i),e=c(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!x(n))throw new Error(`Invalid attribute name: "${n}"`);e=c(t,e);let a="";if(t.substring(e,e+8).toUpperCase()==="NOTATION"){if(a="NOTATION",e+=8,e=c(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let f=[];for(;e<t.length&&t[e]!==")";){let o="";for(;e<t.length&&t[e]!=="|"&&t[e]!==")";)o+=t[e],e++;if(o=o.trim(),!x(o))throw new Error(`Invalid notation name: "${o}"`);f.push(o),t[e]==="|"&&(e++,e=c(t,e))}if(t[e]!==")")throw new Error("Unterminated list of notations");e++,a+=" ("+f.join("|")+")"}else{for(;e<t.length&&!/\s/.test(t[e]);)a+=t[e],e++;const f=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!f.includes(a.toUpperCase()))throw new Error(`Invalid attribute type: "${a}"`)}e=c(t,e);let r="";return t.substring(e,e+8).toUpperCase()==="#REQUIRED"?(r="#REQUIRED",e+=8):t.substring(e,e+7).toUpperCase()==="#IMPLIED"?(r="#IMPLIED",e+=7):[e,r]=this.readIdentifierVal(t,e,"ATTLIST"),{elementName:i,attributeName:n,attributeType:a,defaultValue:r,index:e}}}const c=(s,t)=>{for(;t<s.length&&/\s/.test(s[t]);)t++;return t};function m(s,t,e){for(let i=0;i<t.length;i++)if(t[i]!==s[e+i+1])return!1;return!0}function x(s){if(L(s))return s;throw new Error(`Invalid entity name ${s}`)}const J=/^[-+]?0x[a-fA-F0-9]+$/,Q=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,z={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function H(s,t={}){if(t=Object.assign({},z,t),!s||typeof s!="string")return s;let e=s.trim();if(t.skipLike!==void 0&&t.skipLike.test(e))return s;if(s==="0")return 0;if(t.hex&&J.test(e))return te(e,16);if(e.includes("e")||e.includes("E"))return D(s,e,t);{const i=Q.exec(e);if(i){const n=i[1]||"",a=i[2];let r=ee(i[3]);const f=n?s[a.length+1]===".":s[a.length]===".";if(!t.leadingZeros&&(a.length>1||a.length===1&&!f))return s;{const o=Number(e),l=String(o);if(o===0)return o;if(l.search(/[eE]/)!==-1)return t.eNotation?o:s;if(e.indexOf(".")!==-1)return l==="0"||l===r||l===`${n}${r}`?o:s;let d=a?r:e;return a?d===l||n+d===l?o:s:d===l||d===n+l?o:s}}else return s}}const j=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function D(s,t,e){if(!e.eNotation)return s;const i=t.match(j);if(i){let n=i[1]||"";const a=i[3].indexOf("e")===-1?"E":"e",r=i[2],f=n?s[r.length+1]===a:s[r.length]===a;return r.length>1&&f?s:r.length===1&&(i[3].startsWith(`.${a}`)||i[3][0]===a)?Number(t):e.leadingZeros&&!f?(t=(i[1]||"")+i[3],Number(t)):s}else return s}function ee(s){return s&&s.indexOf(".")!==-1&&(s=s.replace(/0+$/,""),s==="."?s="0":s[0]==="."?s="0"+s:s[s.length-1]==="."&&(s=s.substring(0,s.length-1))),s}function te(s,t){if(parseInt)return parseInt(s,t);if(Number.parseInt)return Number.parseInt(s,t);if(window&&window.parseInt)return window.parseInt(s,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function _(s){return typeof s=="function"?s:Array.isArray(s)?t=>{for(const e of s)if(typeof e=="string"&&t===e||e instanceof RegExp&&e.test(t))return!0}:()=>!1}class se{constructor(t){if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=ne,this.parseXml=le,this.parseTextData=ie,this.resolveNameSpace=re,this.buildAttributesMap=ae,this.isItStopNode=he,this.replaceEntitiesValue=ue,this.readStopNodeData=ce,this.saveTextToParentTag=de,this.addChild=fe,this.ignoreAttributesFn=_(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let e=0;e<this.options.stopNodes.length;e++){const i=this.options.stopNodes[e];typeof i=="string"&&(i.startsWith("*.")?this.stopNodesWildcard.add(i.substring(2)):this.stopNodesExact.add(i))}}}}function ne(s){const t=Object.keys(s);for(let e=0;e<t.length;e++){const i=t[e];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:s[i]}}}function ie(s,t,e,i,n,a,r){if(s!==void 0&&(this.options.trimValues&&!i&&(s=s.trim()),s.length>0)){r||(s=this.replaceEntitiesValue(s));const f=this.options.tagValueProcessor(t,s,e,n,a);return f==null?s:typeof f!=typeof s||f!==s?f:this.options.trimValues?V(s,this.options.parseTagValue,this.options.numberParseOptions):s.trim()===s?V(s,this.options.parseTagValue,this.options.numberParseOptions):s}}function re(s){if(this.options.removeNSPrefix){const t=s.split(":"),e=s.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(s=e+t[1])}return s}const oe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ae(s,t){if(this.options.ignoreAttributes!==!0&&typeof s=="string"){const e=G(s,oe),i=e.length,n={};for(let a=0;a<i;a++){const r=this.resolveNameSpace(e[a][1]);if(this.ignoreAttributesFn(r,t))continue;let f=e[a][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o==="__proto__"&&(o="#__proto__"),f!==void 0){this.options.trimValues&&(f=f.trim()),f=this.replaceEntitiesValue(f);const l=this.options.attributeValueProcessor(r,f,t);l==null?n[o]=f:typeof l!=typeof f||l!==f?n[o]=l:n[o]=V(f,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[o]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){const a={};return a[this.options.attributesGroupName]=n,a}return n}}const le=function(s){s=s.replace(/\r\n?/g,`
`);const t=new T("!xml");let e=t,i="",n="";const a=new K(this.options.processEntities);for(let r=0;r<s.length;r++)if(s[r]==="<")if(s[r+1]==="/"){const o=b(s,">",r,"Closing Tag is not closed.");let l=s.substring(r+2,o).trim();if(this.options.removeNSPrefix){const h=l.indexOf(":");h!==-1&&(l=l.substr(h+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),e&&(i=this.saveTextToParentTag(i,e,n));const d=n.substring(n.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let u=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(u=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=n.lastIndexOf("."),n=n.substring(0,u),e=this.tagsNodeStack.pop(),i="",r=o}else if(s[r+1]==="?"){let o=C(s,r,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,e,n),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const l=new T(o.tagName);l.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(l[":@"]=this.buildAttributesMap(o.tagExp,n)),this.addChild(e,l,n,r)}r=o.closeIndex+1}else if(s.substr(r+1,3)==="!--"){const o=b(s,"-->",r+4,"Comment is not closed.");if(this.options.commentPropName){const l=s.substring(r+4,o-2);i=this.saveTextToParentTag(i,e,n),e.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}r=o}else if(s.substr(r+1,2)==="!D"){const o=a.readDocType(s,r);this.docTypeEntities=o.entities,r=o.i}else if(s.substr(r+1,2)==="!["){const o=b(s,"]]>",r,"CDATA is not closed.")-2,l=s.substring(r+9,o);i=this.saveTextToParentTag(i,e,n);let d=this.parseTextData(l,e.tagname,n,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):e.add(this.options.textNodeName,d),r=o+2}else{let o=C(s,r,this.options.removeNSPrefix),l=o.tagName;const d=o.rawTagName;let u=o.tagExp,h=o.attrExpPresent,g=o.closeIndex;if(this.options.transformTagName){const p=this.options.transformTagName(l);u===l&&(u=p),l=p}e&&i&&e.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,e,n,!1));const N=e;N&&this.options.unpairedTags.indexOf(N.tagname)!==-1&&(e=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),l!==t.tagname&&(n+=n?"."+l:l);const y=r;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,n,l)){let p="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),u=l):u=u.substr(0,u.length-1),r=o.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)r=o.closeIndex;else{const P=this.readStopNodeData(s,d,g+1);if(!P)throw new Error(`Unexpected end of ${d}`);r=P.i,p=P.tagContent}const w=new T(l);l!==u&&h&&(w[":@"]=this.buildAttributesMap(u,n)),p&&(p=this.parseTextData(p,l,n,!0,h,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),w.add(this.options.textNodeName,p),this.addChild(e,w,n,y)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){if(l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),u=l):u=u.substr(0,u.length-1),this.options.transformTagName){const w=this.options.transformTagName(l);u===l&&(u=w),l=w}const p=new T(l);l!==u&&h&&(p[":@"]=this.buildAttributesMap(u,n)),this.addChild(e,p,n,y),n=n.substr(0,n.lastIndexOf("."))}else{const p=new T(l);this.tagsNodeStack.push(e),l!==u&&h&&(p[":@"]=this.buildAttributesMap(u,n)),this.addChild(e,p,n,y),e=p}i="",r=g}}else i+=s[r];return t.child};function fe(s,t,e,i){this.options.captureMetaData||(i=void 0);const n=this.options.updateTag(t.tagname,e,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),s.addChild(t,i))}const ue=function(s){if(this.options.processEntities){for(let t in this.docTypeEntities){const e=this.docTypeEntities[t];s=s.replace(e.regx,e.val)}for(let t in this.lastEntities){const e=this.lastEntities[t];s=s.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const e=this.htmlEntities[t];s=s.replace(e.regex,e.val)}s=s.replace(this.ampEntity.regex,this.ampEntity.val)}return s};function de(s,t,e,i){return s&&(i===void 0&&(i=t.child.length===0),s=this.parseTextData(s,t.tagname,e,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),s!==void 0&&s!==""&&t.add(this.options.textNodeName,s),s=""),s}function he(s,t,e,i){return!!(t&&t.has(i)||s&&s.has(e))}function pe(s,t,e=">"){let i,n="";for(let a=t;a<s.length;a++){let r=s[a];if(i)r===i&&(i="");else if(r==='"'||r==="'")i=r;else if(r===e[0])if(e[1]){if(s[a+1]===e[1])return{data:n,index:a}}else return{data:n,index:a};else r==="	"&&(r=" ");n+=r}}function b(s,t,e,i){const n=s.indexOf(t,e);if(n===-1)throw new Error(i);return n+t.length-1}function C(s,t,e,i=">"){const n=pe(s,t+1,i);if(!n)return;let a=n.data;const r=n.index,f=a.search(/\s/);let o=a,l=!0;f!==-1&&(o=a.substring(0,f),a=a.substring(f+1).trimStart());const d=o;if(e){const u=o.indexOf(":");u!==-1&&(o=o.substr(u+1),l=o!==n.data.substr(u+1))}return{tagName:o,tagExp:a,closeIndex:r,attrExpPresent:l,rawTagName:d}}function ce(s,t,e){const i=e;let n=1;for(;e<s.length;e++)if(s[e]==="<")if(s[e+1]==="/"){const a=b(s,">",e,`${t} is not closed`);if(s.substring(e+2,a).trim()===t&&(n--,n===0))return{tagContent:s.substring(i,e),i:a};e=a}else if(s[e+1]==="?")e=b(s,"?>",e+1,"StopNode is not closed.");else if(s.substr(e+1,3)==="!--")e=b(s,"-->",e+3,"StopNode is not closed.");else if(s.substr(e+1,2)==="![")e=b(s,"]]>",e,"StopNode is not closed.")-2;else{const a=C(s,e,">");a&&((a&&a.tagName)===t&&a.tagExp[a.tagExp.length-1]!=="/"&&n++,e=a.closeIndex)}}function V(s,t,e){if(t&&typeof s=="string"){const i=s.trim();return i==="true"?!0:i==="false"?!1:H(s,e)}else return Z(s)?s:""}const O=T.getMetaDataSymbol();function ge(s,t){return M(s,t)}function M(s,t,e){let i;const n={};for(let a=0;a<s.length;a++){const r=s[a],f=Ne(r);let o="";if(e===void 0?o=f:o=e+"."+f,f===t.textNodeName)i===void 0?i=r[f]:i+=""+r[f];else{if(f===void 0)continue;if(r[f]){let l=M(r[f],t,o);const d=me(l,t);r[O]!==void 0&&(l[O]=r[O]),r[":@"]?Ee(l,r[":@"],o,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),n[f]!==void 0&&n.hasOwnProperty(f)?(Array.isArray(n[f])||(n[f]=[n[f]]),n[f].push(l)):t.isArray(f,o,d)?n[f]=[l]:n[f]=l}}}return typeof i=="string"?i.length>0&&(n[t.textNodeName]=i):i!==void 0&&(n[t.textNodeName]=i),n}function Ne(s){const t=Object.keys(s);for(let e=0;e<t.length;e++){const i=t[e];if(i!==":@")return i}}function Ee(s,t,e,i){if(t){const n=Object.keys(t),a=n.length;for(let r=0;r<a;r++){const f=n[r];i.isArray(f,e+"."+f,!0,!0)?s[f]=[t[f]]:s[f]=t[f]}}}function me(s,t){const{textNodeName:e}=t,i=Object.keys(s).length;return!!(i===0||i===1&&(s[e]||typeof s[e]=="boolean"||s[e]===0))}class Te{constructor(t){this.externalEntities={},this.options=q(t)}parse(t,e){if(typeof t!="string"&&t.toString)t=t.toString();else if(typeof t!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const a=F(t,e);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}const i=new se(this.options);i.addExternalEntities(this.externalEntities);const n=i.parseXml(t);return this.options.preserveOrder||n===void 0?n:ge(n,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}static getMetaDataSymbol(){return T.getMetaDataSymbol()}}const be=`
`;function we(s,t){let e="";return t.format&&t.indentBy.length>0&&(e=be),B(s,t,"",e)}function B(s,t,e,i){let n="",a=!1;for(let r=0;r<s.length;r++){const f=s[r],o=ye(f);if(o===void 0)continue;let l="";if(e.length===0?l=o:l=`${e}.${o}`,o===t.textNodeName){let N=f[o];xe(l,t)||(N=t.tagValueProcessor(o,N),N=R(N,t)),a&&(n+=i),n+=N,a=!1;continue}else if(o===t.cdataPropName){a&&(n+=i),n+=`<![CDATA[${f[o][0][t.textNodeName]}]]>`,a=!1;continue}else if(o===t.commentPropName){n+=i+`<!--${f[o][0][t.textNodeName]}-->`,a=!0;continue}else if(o[0]==="?"){const N=S(f[":@"],t),y=o==="?xml"?"":i;let p=f[o][0][t.textNodeName];p=p.length!==0?" "+p:"",n+=y+`<${o}${p}${N}?>`,a=!0;continue}let d=i;d!==""&&(d+=t.indentBy);const u=S(f[":@"],t),h=i+`<${o}${u}`,g=B(f[o],t,l,d);t.unpairedTags.indexOf(o)!==-1?t.suppressUnpairedNode?n+=h+">":n+=h+"/>":(!g||g.length===0)&&t.suppressEmptyNode?n+=h+"/>":g&&g.endsWith(">")?n+=h+`>${g}${i}</${o}>`:(n+=h+">",g&&i!==""&&(g.includes("/>")||g.includes("</"))?n+=i+t.indentBy+g+i:n+=g,n+=`</${o}>`),a=!0}return n}function ye(s){const t=Object.keys(s);for(let e=0;e<t.length;e++){const i=t[e];if(s.hasOwnProperty(i)&&i!==":@")return i}}function S(s,t){let e="";if(s&&!t.ignoreAttributes)for(let i in s){if(!s.hasOwnProperty(i))continue;let n=t.attributeValueProcessor(i,s[i]);n=R(n,t),n===!0&&t.suppressBooleanAttributes?e+=` ${i.substr(t.attributeNamePrefix.length)}`:e+=` ${i.substr(t.attributeNamePrefix.length)}="${n}"`}return e}function xe(s,t){s=s.substr(0,s.length-t.textNodeName.length-1);let e=s.substr(s.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===s||t.stopNodes[i]==="*."+e)return!0;return!1}function R(s,t){if(s&&s.length>0&&t.processEntities)for(let e=0;e<t.entities.length;e++){const i=t.entities[e];s=s.replace(i.regex,i.val)}return s}const Ie={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(s,t){return t},attributeValueProcessor:function(s,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function E(s){this.options=Object.assign({},Ie,s),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=_(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Oe),this.processTextOrObjNode=Pe,this.options.format?(this.indentate=Ae,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}E.prototype.build=function(s){return this.options.preserveOrder?we(s,this.options):(Array.isArray(s)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(s={[this.options.arrayNodeName]:s}),this.j2x(s,0,[]).val)};E.prototype.j2x=function(s,t,e){let i="",n="";const a=e.join(".");for(let r in s)if(Object.prototype.hasOwnProperty.call(s,r))if(typeof s[r]>"u")this.isAttribute(r)&&(n+="");else if(s[r]===null)this.isAttribute(r)||r===this.options.cdataPropName?n+="":r[0]==="?"?n+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(s[r]instanceof Date)n+=this.buildTextValNode(s[r],r,"",t);else if(typeof s[r]!="object"){const f=this.isAttribute(r);if(f&&!this.ignoreAttributesFn(f,a))i+=this.buildAttrPairStr(f,""+s[r]);else if(!f)if(r===this.options.textNodeName){let o=this.options.tagValueProcessor(r,""+s[r]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(s[r],r,"",t)}else if(Array.isArray(s[r])){const f=s[r].length;let o="",l="";for(let d=0;d<f;d++){const u=s[r][d];if(!(typeof u>"u"))if(u===null)r[0]==="?"?n+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(typeof u=="object")if(this.options.oneListGroup){const h=this.j2x(u,t+1,e.concat(r));o+=h.val,this.options.attributesGroupName&&u.hasOwnProperty(this.options.attributesGroupName)&&(l+=h.attrStr)}else o+=this.processTextOrObjNode(u,r,t,e);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(r,u);h=this.replaceEntitiesValue(h),o+=h}else o+=this.buildTextValNode(u,r,"",t)}this.options.oneListGroup&&(o=this.buildObjectNode(o,r,l,t)),n+=o}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const f=Object.keys(s[r]),o=f.length;for(let l=0;l<o;l++)i+=this.buildAttrPairStr(f[l],""+s[r][f[l]])}else n+=this.processTextOrObjNode(s[r],r,t,e);return{attrStr:i,val:n}};E.prototype.buildAttrPairStr=function(s,t){return t=this.options.attributeValueProcessor(s,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+s:" "+s+'="'+t+'"'};function Pe(s,t,e,i){const n=this.j2x(s,e+1,i.concat(t));return s[this.options.textNodeName]!==void 0&&Object.keys(s).length===1?this.buildTextValNode(s[this.options.textNodeName],t,n.attrStr,e):this.buildObjectNode(n.val,t,n.attrStr,e)}E.prototype.buildObjectNode=function(s,t,e,i){if(s==="")return t[0]==="?"?this.indentate(i)+"<"+t+e+"?"+this.tagEndChar:this.indentate(i)+"<"+t+e+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,a="";return t[0]==="?"&&(a="?",n=""),(e||e==="")&&s.indexOf("<")===-1?this.indentate(i)+"<"+t+e+a+">"+s+n:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(i)+`<!--${s}-->`+this.newLine:this.indentate(i)+"<"+t+e+a+this.tagEndChar+s+this.indentate(i)+n}};E.prototype.closeTag=function(s){let t="";return this.options.unpairedTags.indexOf(s)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${s}`,t};E.prototype.buildTextValNode=function(s,t,e,i){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${s}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(i)+`<!--${s}-->`+this.newLine;if(t[0]==="?")return this.indentate(i)+"<"+t+e+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,s);return n=this.replaceEntitiesValue(n),n===""?this.indentate(i)+"<"+t+e+this.closeTag(t)+this.tagEndChar:this.indentate(i)+"<"+t+e+">"+n+"</"+t+this.tagEndChar}};E.prototype.replaceEntitiesValue=function(s){if(s&&s.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const e=this.options.entities[t];s=s.replace(e.regex,e.val)}return s};function Ae(s){return this.options.indentBy.repeat(s)}function Oe(s){return s.startsWith(this.options.attributeNamePrefix)&&s!==this.options.textNodeName?s.substr(this.attrPrefixLen):!1}function Ce(s,t){const e=k.validate(s);if(e!==!0)return typeof e=="object"&&e.err?`Invalid XML: ${e.err.msg} (line ${e.err.line}, col ${e.err.col})`:"Invalid XML";try{const n=new Te().parse(s);return new E({format:!0,indentBy:"  "}).build(n)}catch(i){return`Invalid XML: ${i.message}`}}const Ve={},$e=[{title:"Beautify XML",description:"Beautify a compact XML string for readability.",sampleText:"<root><item>1</item><item>2</item></root>",sampleResult:`<root>
  <item>1</item>
  <item>2</item>
</root>`,sampleOptions:{}}];function Ye({title:s,longDescription:t}){const{t:e}=v("xml"),[i,n]=$.useState(""),[a,r]=$.useState(""),f=(o,l)=>{r(Ce(l))};return A.jsx(U,{title:s,input:i,inputComponent:A.jsx(X,{title:e("xmlBeautifier.inputTitle"),value:i,onChange:n}),resultComponent:A.jsx(Y,{title:e("xmlBeautifier.resultTitle"),value:a,extension:"xml"}),initialValues:Ve,exampleCards:$e,getGroups:null,setInput:n,compute:f,toolInfo:{title:e("xmlBeautifier.toolInfo.title",{title:s}),description:t}})}export{Ye as default};
