import{a as G,r as h,j as n,B as f}from"./index-C_g83nc7.js";import{T as S}from"./ToolContent-CPG3NUPt.js";import{T as C}from"./ToolTextResult-h-NChVzd.js";import{T as P}from"./TextFieldWithDesc-PPwE1_13.js";import{C as w}from"./CheckboxWithDesc-wy5nrFmd.js";import{S as y}from"./SimpleRadio-kuqVngOy.js";import{A as v}from"./Alert-k7_hFgzz.js";import"./TextField-BB1W8KIt.js";import"./ContentPaste-CjGTXkhv.js";import"./ResultFooter-BsMB-Y2y.js";import"./FormControlLabel-BYSc6Di4.js";import"./Checkbox-eIAKSjSC.js";import"./SwitchBase-BBer0tk-.js";import"./Radio-UAGSoQ3a.js";import"./Close-CQfNI9A9.js";const R={"well-known":{name:"Well-Known Ports",min:1,max:1023,description:"System ports (1-1023) - Reserved for common services like HTTP, HTTPS, SSH, etc."},registered:{name:"Registered Ports",min:1024,max:49151,description:"User ports (1024-49151) - Available for applications and services"},dynamic:{name:"Dynamic Ports",min:49152,max:65535,description:"Private ports (49152-65535) - Available for temporary or private use"},custom:{name:"Custom Range",min:1,max:65535,description:"Custom port range - Specify your own min and max values"}};function D(a){const{portRange:s,minPort:t,maxPort:u,count:i,allowDuplicates:d,sortResults:g}=a,x=R[s],m=s==="custom"?t:x.min,p=s==="custom"?u:x.max;if(m>=p)throw new Error("Minimum port must be less than maximum port");if(i<=0)throw new Error("Count must be greater than 0");if(m<1||p>65535)throw new Error("Ports must be between 1 and 65535");if(!d&&i>p-m+1)throw new Error("Cannot generate unique ports: count exceeds available range");const c=[];if(d)for(let l=0;l<i;l++){const r=T(m,p);c.push(r)}else{const l=new Set;for(let o=m;o<=p;o++)l.add(o);const r=Array.from(l);for(let o=r.length-1;o>0;o--){const e=Math.floor(Math.random()*(o+1));[r[o],r[e]]=[r[e],r[o]]}for(let o=0;o<Math.min(i,r.length);o++)c.push(r[o])}return g&&c.sort((l,r)=>l-r),{ports:c,range:{...x,min:m,max:p},count:i,hasDuplicates:!d&&k(c),isSorted:g}}function T(a,s){return Math.floor(Math.random()*(s-a+1))+a}function k(a){const s=new Set;for(const t of a){if(s.has(t))return!0;s.add(t)}return!1}function E(a,s){return a.map(t=>t.toString()).join(s)}function M(a){const{portRange:s,minPort:t,maxPort:u,count:i}=a;if(i<=0)return"Count must be greater than 0";if(i>1e3)return"Count cannot exceed 1,000";if(s==="custom"){if(t>=u)return"Minimum port must be less than maximum port";if(t<1||u>65535)return"Ports must be between 1 and 65535"}return null}function b(a){return R[a]||R.custom}const A={portRange:"registered",minPort:1024,maxPort:49151,count:5,allowDuplicates:!1,sortResults:!1,separator:", "};function X({title:a,longDescription:s}){const{t}=G("number"),[u,i]=h.useState(null),[d,g]=h.useState(null),[x,m]=h.useState(""),p=r=>{try{g(null),i(null),m("");const o=M(r);if(o){g(o);return}const e=D(r);i(e);const j=E(e.ports,r.separator);m(j)}catch(o){console.error("Random port generation failed:",o),g(t("randomPortGenerator.error.generationFailed"))}},c=[{value:"well-known",label:t("randomPortGenerator.options.range.wellKnown")},{value:"registered",label:t("randomPortGenerator.options.range.registered")},{value:"dynamic",label:t("randomPortGenerator.options.range.dynamic")},{value:"custom",label:t("randomPortGenerator.options.range.custom")}],l=({values:r,updateField:o})=>[{title:t("randomPortGenerator.options.range.title"),component:n.jsxs(f,{children:[c.map(e=>n.jsx(y,{title:e.label,checked:r.portRange===e.value,onClick:()=>o("portRange",e.value)},e.value)),r.portRange==="custom"&&n.jsxs(f,{sx:{mt:2},children:[n.jsx(P,{value:r.minPort.toString(),onOwnChange:e=>o("minPort",parseInt(e)||1024),description:t("randomPortGenerator.options.range.minPortDescription"),inputProps:{type:"number",min:1,max:65535,"data-testid":"min-port-input"}}),n.jsx(P,{value:r.maxPort.toString(),onOwnChange:e=>o("maxPort",parseInt(e)||49151),description:t("randomPortGenerator.options.range.maxPortDescription"),inputProps:{type:"number",min:1,max:65535,"data-testid":"max-port-input"}})]}),n.jsxs(f,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1},children:[n.jsx("strong",{children:b(r.portRange).name}),n.jsx("br",{}),b(r.portRange).description]})]})},{title:t("randomPortGenerator.options.generation.title"),component:n.jsxs(f,{children:[n.jsx(P,{value:r.count.toString(),onOwnChange:e=>o("count",parseInt(e)||5),description:t("randomPortGenerator.options.generation.countDescription"),inputProps:{type:"number",min:1,max:1e3,"data-testid":"count-input"}}),n.jsx(w,{title:t("randomPortGenerator.options.generation.allowDuplicates.title"),checked:r.allowDuplicates,onChange:e=>o("allowDuplicates",e),description:t("randomPortGenerator.options.generation.allowDuplicates.description")}),n.jsx(w,{title:t("randomPortGenerator.options.generation.sortResults.title"),checked:r.sortResults,onChange:e=>o("sortResults",e),description:t("randomPortGenerator.options.generation.sortResults.description")})]})},{title:t("randomPortGenerator.options.output.title"),component:n.jsx(f,{children:n.jsx(P,{value:r.separator,onOwnChange:e=>o("separator",e),description:t("randomPortGenerator.options.output.separatorDescription"),inputProps:{"data-testid":"separator-input"}})})}];return n.jsx(S,{title:a,initialValues:A,compute:p,getGroups:l,resultComponent:n.jsxs(f,{children:[d&&n.jsx(v,{severity:"error",sx:{mb:2},children:d}),u&&n.jsx(C,{title:t("randomPortGenerator.result.title"),value:x})]}),toolInfo:{title:t("randomPortGenerator.info.title"),description:s||t("randomPortGenerator.info.description")}})}export{X as default};
