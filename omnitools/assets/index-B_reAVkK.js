import{r as p,J as P,j as r,B as h}from"./index-C_g83nc7.js";import{T as x}from"./ToolContent-CPG3NUPt.js";import{T as g}from"./ToolPdfInput-BQKBacX6.js";import{T as D}from"./ToolFileResult-UmzxLoM8.js";import{p as y,l as C}from"./utils-C6ykel4o.js";import{T as m}from"./TextFieldWithDesc-PPwE1_13.js";import"./TextField-BB1W8KIt.js";import"./BaseFileInput-c8nMlesD.js";import"./ContentPaste-CjGTXkhv.js";import"./InputFooter-BEiN93nS.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-Ccv-xqw_.js";import"./ResultFooter-BsMB-Y2y.js";async function j(s,e){if(s.type!=="application/pdf")throw new Error("The provided file is not a PDF");if(e.password!==e.confirmPassword)throw new Error("Passwords do not match");if(!e.password)throw new Error("Password cannot be empty");const n={psDataURL:URL.createObjectURL(s),password:e.password},i=await y(n);return await C(i,s.name.replace(".pdf","-protected.pdf"))}const T={password:"",confirmPassword:""};function v({title:s,longDescription:e}){const[n,i]=p.useState(null),[w,d]=p.useState(null),[f,l]=p.useState(!1),{showSnackBar:c}=p.useContext(P),u=async(o,a)=>{if(a)try{if(o.password!==o.confirmPassword){c("Passwords do not match","error");return}if(!o.password){c("Password cannot be empty","error");return}l(!0);const t=await j(a,o);d(t)}catch(t){console.error("Error protecting PDF:",t),c(`Failed to protect PDF: ${t instanceof Error?t.message:String(t)}`,"error"),d(null)}finally{l(!1)}};return r.jsx(x,{title:s,input:n,setInput:i,initialValues:T,compute:u,inputComponent:r.jsx(g,{value:n,onChange:i,accept:["application/pdf"],title:"Input PDF"}),resultComponent:r.jsx(D,{title:"Protected PDF",value:w,extension:"pdf",loading:f,loadingText:"Protecting PDF"}),getGroups:({values:o,updateField:a})=>[{title:"Password Settings",component:r.jsxs(h,{children:[r.jsx(m,{title:"Password",description:"Enter a password to protect your PDF",placeholder:"Enter password",type:"password",value:o.password,onOwnChange:t=>a("password",t)}),r.jsx(m,{title:"Confirm Password",description:"Re-enter your password to confirm",placeholder:"Confirm password",type:"password",value:o.confirmPassword,onOwnChange:t=>a("confirmPassword",t)})]})}]})}export{v as default};
