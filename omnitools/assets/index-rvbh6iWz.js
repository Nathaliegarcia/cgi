import{a as v,d as C,r as h,J as P,j as o,B as f,an as w,T as y,h as R}from"./index-C_g83nc7.js";import{T as k}from"./ToolContent-CPG3NUPt.js";import{T as I}from"./ToolPdfInput-BQKBacX6.js";import{g as T,J as D,p as F,G as B}from"./jszip.min-qPlScrIa.js";import{I as L}from"./ContentPaste-CjGTXkhv.js";import{g as U}from"./grey-pattern-DMflWW5d.js";import{C as S,R as W}from"./ResultFooter-BsMB-Y2y.js";import"./TextField-BB1W8KIt.js";import"./BaseFileInput-c8nMlesD.js";import"./InputFooter-BEiN93nS.js";import"./lodash-Ccv-xqw_.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";B.workerSrc=F;async function z(p){const i=await p.arrayBuffer(),s=await T({data:i}).promise,u=new D,l=[];for(let c=1;c<=s.numPages;c++){const d=await s.getPage(c),r=d.getViewport({scale:2}),e=document.createElement("canvas"),n=e.getContext("2d");e.width=r.width,e.height=r.height,await d.render({canvas:e,canvasContext:n,viewport:r}).promise;const t=await new Promise(j=>e.toBlob(x=>x&&j(x),"image/png")),a=`page-${c}.png`,b=URL.createObjectURL(t);l.push({blob:t,url:b,filename:a}),u.file(a,t)}const m=await u.generateAsync({type:"arraybuffer"}),g=new File([m],p.name.replace(/\.pdf$/i,"-pages.zip"),{type:"application/zip"});return{images:l,zipFile:g}}function G({title:p="Result",value:i,zipFile:s,loading:u,loadingText:l}){const{t:m}=v(),g=C(),{showSnackBar:c}=h.useContext(P),d=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":e.type.startsWith("application/pdf")?"pdf":"unknown",r=e=>{const n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)};return o.jsxs(f,{children:[o.jsx(L,{title:p||m("toolMultiFileResult.result")}),o.jsx(f,{sx:{width:"100%",height:w,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,border:1,borderRadius:2,boxShadow:"5",bgcolor:"background.paper",alignItems:"center",p:2},children:u?o.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:w},children:[o.jsx(S,{}),o.jsx(y,{variant:"body2",sx:{mt:2},children:l||m("toolMultiFileResult.loading")})]}):i.length>0&&i.map((e,n)=>{const t=URL.createObjectURL(e),a=d(e);return o.jsxs(f,{sx:{backgroundImage:a==="image"&&g.palette.mode!=="dark"?`url(${U})`:"none",p:1,border:"1px solid #ddd",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[a==="image"&&o.jsx("img",{src:t,alt:`Preview ${n}`,style:{maxWidth:"100%",maxHeight:300}}),a==="video"&&o.jsx("video",{src:t,controls:!0,style:{maxWidth:"100%"}}),a==="audio"&&o.jsx("audio",{src:t,controls:!0,style:{width:"100%"}}),a==="pdf"&&o.jsx("iframe",{src:t,width:"100%",height:"400px"}),a==="unknown"&&o.jsx(y,{children:"File ready. Click below to download."}),o.jsxs(R,{onClick:()=>r(e),size:"small",sx:{mt:1},variant:"contained",children:["Download ",e.name]})]},n)})}),o.jsx(W,{downloadLabel:"Download All as ZIP",hideCopy:!0,disabled:!s,handleDownload:()=>s&&r(s)})]})}function _({title:p}){const[i,s]=h.useState(null),[u,l]=h.useState([]),[m,g]=h.useState(null),[c,d]=h.useState(!1),r=async(e,n)=>{if(n){d(!0),l([]),g(null);try{const{images:t,zipFile:a}=await z(n);l(t),g(a)}catch(t){console.error("Conversion failed:",t)}finally{d(!1)}}};return o.jsx(k,{title:p,input:i,setInput:s,initialValues:{},compute:r,inputComponent:o.jsx(I,{value:i,onChange:s,accept:["application/pdf"],title:"Upload a PDF"}),resultComponent:o.jsx(G,{title:"Converted PNG Pages",value:u.map(e=>new File([e.blob],e.filename,{type:"image/png"})),zipFile:m,loading:c,loadingText:"Converting PDF pages"}),getGroups:null,toolInfo:{title:"Convert PDF pages into PNG images",description:"Upload your PDF and get each page rendered as a high-quality PNG. You can preview, download individually, or get all images in a ZIP."}})}export{_ as default};
